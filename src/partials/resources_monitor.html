<%
let fsSystem = (filesystem === false ? false : _.find(filesystem, (fs) => { return fs.mount === '/'; }));
let fsData = (filesystem === false ? false : _.find(filesystem, (fs) => { return fs.mount === '/messier'; }));
%>
<div id="resource-usage" class="card text-bg-light rounded-4 border-0">
	<div class="card-body p-0">
		<div class="p-2">
			<ul class="list-group list-group-flush">
				<li class="list-group-item">
					<h6 class="text-body-emphasis mb-0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa"><path fill="var(--bs-gray-500)" d="M184 24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64h-8c-35.3 0-64 28.7-64 64v8H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v48H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v48H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64v8c0 35.3 28.7 64 64 64h8v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h48v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h48v40c0 13.3 10.7 24 24 24s24-10.7 24-24V448h8c35.3 0 64-28.7 64-64v-8h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448V280h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448V184h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H448v-8c0-35.3-28.7-64-64-64h-8V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H280V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V64H184V24zM400 128V384c0 8.8-7.2 16-16 16H128c-8.8 0-16-7.2-16-16V128c0-8.8 7.2-16 16-16H384c8.8 0 16 7.2 16 16zM192 160c-17.7 0-32 14.3-32 32V320c0 17.7 14.3 32 32 32H320c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32H192zm16 48h96v96H208V208z"/></svg>
						CPU
					</h6>
					<%if (cpu === false) {%>
						<span class="text-red-300">Error fetching data</span>
					<%} else {%>
						<div class="row g-0 d-flex align-items-baseline">
							<div class="col">
								<div class="progress" role="progressbar">
									<div class="progress-bar bg-blue-300" style="width: <%=cpu.currentLoad.toFixed(0)%>%;"></div>
								</div>
							</div>
							<div class="col-auto lh-1 text-body-tertiary text-end" style="width: 45px;">
								<small class="fw-light"><%=cpu.currentLoad.toFixed(0)%>%</small>
							</div>
						</div>
						<div>
							<small class="badge rounded-pill bd-gray-200 fw-light me-1" style="width: 69px;">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa"><path fill="var(--bs-gray-500)" d="M160 64c-26.5 0-48 21.5-48 48V276.5c0 17.3-7.1 31.9-15.3 42.5C86.2 332.6 80 349.5 80 368c0 44.2 35.8 80 80 80s80-35.8 80-80c0-18.5-6.2-35.4-16.7-48.9c-8.2-10.6-15.3-25.2-15.3-42.5V112c0-26.5-21.5-48-48-48zM48 112C48 50.2 98.1 0 160 0s112 50.1 112 112V276.5c0 .1 .1 .3 .2 .6c.2 .6 .8 1.6 1.7 2.8c18.9 24.4 30.1 55 30.1 88.1c0 79.5-64.5 144-144 144S16 447.5 16 368c0-33.2 11.2-63.8 30.1-88.1c.9-1.2 1.5-2.2 1.7-2.8c.1-.3 .2-.5 .2-.6V112zM208 368c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-20.9 13.4-38.7 32-45.3V208c0-8.8 7.2-16 16-16s16 7.2 16 16V322.7c18.6 6.6 32 24.4 32 45.3z"/></svg>
								<%=cpu.temperature.main.toFixed(0)%> Â°C
							</small>
							<small class="badge rounded-pill bd-gray-200 fw-light">
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa"><path fill="var(--bs-gray-500)" d="M258.6 0c-1.7 0-3.4 .1-5.1 .5C168 17 115.6 102.3 130.5 189.3c2.9 17 8.4 32.9 15.9 47.4L32 224H29.4C13.2 224 0 237.2 0 253.4c0 1.7 .1 3.4 .5 5.1C17 344 102.3 396.4 189.3 381.5c17-2.9 32.9-8.4 47.4-15.9L224 480v2.6c0 16.2 13.2 29.4 29.4 29.4c1.7 0 3.4-.1 5.1-.5C344 495 396.4 409.7 381.5 322.7c-2.9-17-8.4-32.9-15.9-47.4L480 288h2.6c16.2 0 29.4-13.2 29.4-29.4c0-1.7-.1-3.4-.5-5.1C495 168 409.7 115.6 322.7 130.5c-17 2.9-32.9 8.4-47.4 15.9L288 32V29.4C288 13.2 274.8 0 258.6 0zM256 224a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>
								<%=cpu.fan%> rpm
							</small>
						</div>
					<%}%>
				</li>
				<li class="list-group-item">
					<h6 class="text-body-emphasis mb-0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="fa"><path fill="var(--bs-gray-500)" d="M64 112H512c8.8 0 16 7.2 16 16v8.4c-19.6 17.5-32 43.1-32 71.6s12.4 54 32 71.6V304H48V279.6C67.6 262 80 236.5 80 208s-12.4-54-32-71.6V128c0-8.8 7.2-16 16-16zM528 352v48H472c0-13.3-10.7-24-24-24s-24 10.7-24 24H392c0-13.3-10.7-24-24-24s-24 10.7-24 24H312c0-13.3-10.7-24-24-24s-24 10.7-24 24H232c0-13.3-10.7-24-24-24s-24 10.7-24 24H152c0-13.3-10.7-24-24-24s-24 10.7-24 24H48V352H528zM64 64C28.7 64 0 92.7 0 128v23.4c0 6.8 4.4 12.6 10.1 16.3C23.3 176.3 32 191.1 32 208s-8.7 31.7-21.9 40.3C4.4 252 0 257.8 0 264.6V416c0 17.7 14.3 32 32 32H544c17.7 0 32-14.3 32-32V264.6c0-6.8-4.4-12.6-10.1-16.3C552.7 239.7 544 224.9 544 208s8.7-31.7 21.9-40.3c5.7-3.7 10.1-9.5 10.1-16.3V128c0-35.3-28.7-64-64-64H64zm104 80c-13.3 0-24 10.7-24 24v80c0 13.3 10.7 24 24 24s24-10.7 24-24V168c0-13.3-10.7-24-24-24zm120 0c-13.3 0-24 10.7-24 24v80c0 13.3 10.7 24 24 24s24-10.7 24-24V168c0-13.3-10.7-24-24-24zm120 0c-13.3 0-24 10.7-24 24v80c0 13.3 10.7 24 24 24s24-10.7 24-24V168c0-13.3-10.7-24-24-24z"/></svg>
						RAM
					</h6>
					<%if (memory === false) {%>
						<span class="text-red-300">Error fetching data</span>
					<%} else {%>
						<div class="row g-0 d-flex align-items-baseline">
							<div class="col">
								<div class="progress" role="progressbar">
									<div class="progress-bar bg-blue-300" style="width: <%=(memory.active * 100 / memory.total)%>%;"></div>
								</div>
							</div>
							<div class="col-auto lh-1 text-body-tertiary text-end" style="width: 45px;">
								<small class="fw-light"><%=(memory.active * 100 / memory.total).toFixed(0)%>%</small>
							</div>
						</div>
						<div class="lh-1 text-body-tertiary mt-1">
							<small>Size: <%=prettyBytes(memory.total)%></small><br>
							<small>Used: <%=prettyBytes(memory.active)%></small><br>
							<small>Free: <%=prettyBytes(memory.available)%></small>
						</div>
					<%}%>
				</li>
				<li class="list-group-item">
					<h6 class="text-body-emphasis mb-0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa"><path fill="var(--bs-gray-500)" d="M64 80c-8.8 0-16 7.2-16 16V258c5.1-1.3 10.5-2 16-2H448c5.5 0 10.9 .7 16 2V96c0-8.8-7.2-16-16-16H64zM48 320v96c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V320c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16zM0 320V96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V320v96c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V320zm280 48a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm120-24a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>
						Storage <small class="text-body-secondary"> &middot; system</small>
					</h6>
					<%if (fsSystem === false) {%>
						<span class="text-red-300">Error fetching data</span>
					<%} else {%>
						<div class="row g-0 d-flex align-items-baseline">
							<div class="col">
								<div class="progress" role="progressbar">
									<div class="progress-bar bg-blue-300" style="width: <%=(fsSystem.used * 100 / fsSystem.size)%>%;"></div>
								</div>
							</div>
							<div class="col-auto lh-1 text-body-tertiary text-end" style="width: 45px;">
								<small class="fw-light"><%=(fsSystem.used * 100 / fsSystem.size).toFixed(0)%>%</small>
							</div>
						</div>
						<div class="lh-1 text-body-tertiary mt-1">
							<small>Size: <%=prettyBytes(fsSystem.size)%></small><br>
							<small>Used: <%=prettyBytes(fsSystem.used)%></small><br>
							<small>Free: <%=prettyBytes(fsSystem.available)%></small>
						</div>
					<%}%>
				</li>
				<li class="list-group-item">
					<h6 class="text-body-emphasis mb-0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa"><path fill="var(--bs-gray-500)" d="M64 80c-8.8 0-16 7.2-16 16V258c5.1-1.3 10.5-2 16-2H448c5.5 0 10.9 .7 16 2V96c0-8.8-7.2-16-16-16H64zM48 320v96c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V320c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16zM0 320V96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V320v96c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V320zm280 48a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm120-24a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>
						Storage <small class="text-body-secondary"> &middot; data</small>
					</h6>
					<%if (fsData === false) {%>
						<span class="text-red-300">Error fetching data</span>
					<%} else {%>
						<div class="row g-0 d-flex align-items-baseline">
							<div class="col">
								<div class="progress" role="progressbar">
									<div class="progress-bar bg-blue-300" style="width: <%=(fsData.used * 100 / fsData.size)%>%;"></div>
								</div>
							</div>
							<div class="col-auto lh-1 text-body-tertiary text-end" style="width: 45px;">
								<small class="fw-light"><%=(fsData.used * 100 / fsData.size).toFixed(0)%>%</small>
							</div>
						</div>
						<div class="lh-1 text-body-tertiary mt-1">
							<small>Size: <%=prettyBytes(fsData.size)%></small><br>
							<small>Used: <%=prettyBytes(fsData.used)%></small><br>
							<small>Free: <%=prettyBytes(fsData.available)%></small>
						</div>
					<%}%>
				</li>
				<li class="list-group-item">
					<h6 class="text-body-emphasis mb-0">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="fa"><path fill="var(--bs-gray-500)" d="M400 48v96H240V48H400zM240 0c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h56v40H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H136v40H80c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H240c26.5 0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H184V280H456v40H400c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H560c26.5 0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H504V280H616c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V192h56c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48H240zM80 368H240v96H80V368zm480 0v96H400V368H560z"/></svg>
						Network <small class="text-body-secondary"> &middot; eth0</small>
					</h6>
					<%if (network === false) {%>
						<span class="text-red-300">Error fetching data</span>
					<%} else {%>
						<div class="network-chart" style="width: 100%; height: 100px;"></div>
						<div class="lh-1 text-body-tertiary text-end mt-1">
							<table>
								<tbody>
									<tr>
										<td>
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="fa"><path fill="var(--bs-gray-600)" d="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/></svg>
											<small>RX:</small>
										</td>
										<td><small><%=prettyBytes(network.rx_sec)%>/s</small></td>
									</tr>
									<tr>
										<td>
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="fa"><path fill="var(--bs-gray-400)" d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"/></svg>
											<small>TX:</small>
										</td>
										<td><small><%=prettyBytes(network.tx_sec)%>/s</small></td>
									</tr>
								</tbody>
							</table>
						</div>
					<%}%>
				</li>
				<%if (ups === false || !_.isEmpty(ups)) {%>
					<li class="list-group-item">
						<h6 class="text-body-emphasis mb-0">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa"><path fill="var(--bs-gray-500)" d="M80 96c0-17.7 14.3-32 32-32h64c17.7 0 32 14.3 32 32l96 0c0-17.7 14.3-32 32-32h64c17.7 0 32 14.3 32 32h16c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64l16 0zM64 144c-8.8 0-16 7.2-16 16V384c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16H64zm304 32c8.8 0 16 7.2 16 16v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H384v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V256H320c-8.8 0-16-7.2-16-16s7.2-16 16-16h32V192c0-8.8 7.2-16 16-16zM96 224h96c8.8 0 16 7.2 16 16s-7.2 16-16 16H96c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
							UPS
						</h6>
						<%if (ups === false) {%>
							<span class="text-red-300">Error fetching data</span>
						<%} else {%>
							<div class="row g-0 d-flex align-items-baseline">
								<div class="col">
									<div class="progress" role="progressbar">
										<div class="progress-bar <%=(ups.powerSource === 'grid' ? 'bg-green-300' : (ups.powerSource === 'battery' ? 'progress-bar-striped progress-bar-animated bg-orange-300' : ''))%>" style="width: <%=ups.batteryCharge%>%;"></div>
									</div>
								</div>
								<div class="col-auto lh-1 text-body-tertiary text-end" style="width: 45px;">
									<small class="fw-light"><%=ups.batteryCharge%>%</small>
								</div>
							</div>
							<small>
								<%if (ups.powerSource === 'grid') {%>
									<span class="badge rounded-pill bd-green-100">GRID</span>
								<%}%>
								<%if (ups.powerSource === 'battery') {%>
									<span class="badge rounded-pill bd-orange-100">BATTERY</span>
								<%}%>
							</small>
						<%}%>
					</li>
				<%}%>
				<li class="list-group-item">
					<%if (time === false) {%>
						<span class="text-red-300">Error fetching data</span>
					<%} else {%>
						<small class="text-body-tertiary">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa"><path fill="var(--bs-gray-500)" d="M232 24c0-13.3 10.7-24 24-24C397.4 0 512 114.6 512 256s-114.6 256-256 256S0 397.4 0 256c0-37.9 8.2-73.8 23-106.1c6-13.2 13.1-25.8 21.2-37.6c0-.1 .1-.1 .1-.2C53.4 98.7 63.6 86.3 75 75c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9c-9.2 9.2-17.6 19.3-25 30.1c0 .1-.1 .1-.1 .2c-21.2 31.2-34.2 68.5-35.7 108.7c-.1 2.7-.2 5.4-.2 8.1c0 114.9 93.1 208 208 208s208-93.1 208-208c0-106.8-80.4-194.7-184-206.6V104c0 13.3-10.7 24-24 24s-24-10.7-24-24V24zM159 159c9.4-9.4 24.6-9.4 33.9 0l80 80c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-80-80c-9.4-9.4-9.4-24.6 0-33.9z"/></svg>
							Uptime: <%=prettyMilliseconds(time.uptime * 1000, { secondsDecimalDigits: 0 })%>
						</small>
					<%}%>
				</li>
			</ul>
		</div>
	</div>
</div>
